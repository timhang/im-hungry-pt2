<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Search Page</title>
<link rel="stylesheet" href="css/bootstrap.min.css" />
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="searchPage.css" />
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>

	<!-- structural layout of our search page -->
	<h1 class="title">I'm Hungry</h1>
	<form method="POST" onsubmit="return myFunction()"
		action="resultsPage.jsp">
		<!-- User input text and integer boxes -->
		<div class="userInput">
			<input id="searchText" name="searchText" type="text"
				placeholder="Enter Food" style="width: 150px; height: 20px">
			<input id="integerBox" title="Number of items to show in results"
				name="numberType" min="1" style="width: 30px; height: 20px">
		</div>

		<div class="wrapper">
			<button type="submit" id="feedMeButton">
				<span class="rainbow">Feed Me!</span>
			</button>

		</div>
	</form>

	<script>
			/* function that validates user input in the text bar and integer box */
			function myFunction() {
		        var searchText = document.getElementById('searchText').value;
			  	var intNum = document.getElementById('integerBox').value;
			  	
			  	if(searchText === "" || searchText ===null){
			  		//alert("Please enter dish name");
			  		return false;
			  	}
			  	
			  	if(intNum === "" || intNum === null){
			  		document.getElementById('integerBox').value = 5;
			  	}
			  	if (intNum === "0" || intNum === 0){
			  		//alert("Please enter an integer value greater than 0");
			  		return false;
			  	}
			  	
			  	document.getElementById('feedMeButton').setAttribute("id", "smiley");
			  	
			  	sessionStorage.setItem('searchText',searchText);
			  	
			  	return true;
			}
			setInputFilter(document.getElementById("integerBox"), function(value) {
				  return /^\d*$/.test(value);
				});
			/* function that responses to user input */
			function setInputFilter(textbox, inputFilter) {
				  ["input", "keydown", "keyup", "mousedown", "mouseup", "select", "contextmenu", "drop"].forEach(function(event) {
				    textbox.addEventListener(event, function() {
				      if (inputFilter(this.value)) {
				        this.oldValue = this.value;
				        this.oldSelectionStart = this.selectionStart;
				        this.oldSelectionEnd = this.selectionEnd;
				      } else if (this.hasOwnProperty("oldValue")) {
				        this.value = this.oldValue;
				        this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
				      }
				    });
				  });
				}
			
		</script>

</body>
</html>